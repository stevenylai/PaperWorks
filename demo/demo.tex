\section{Demo Instructions}
\label{sec:procedure}
Current Working Demos:
\begin{enumerate}
\item Collision Avoidance \label{demo:collision}
\item Object Tracking \label{demo:tracking}
\item Traffic Light Control \label{demo:trafficLight}
\item Structural Health Monitoring \label{demo:shm}
\item PSWare \label{demo:psware}
\end{enumerate}
All the demos need the model cars. To install the TinyOS program on the model cars, following these instructions in Cygwin:

\begin{center}
	\begin{tabular}{ | p{2cm} | p{10cm} | }
		\hline
		\multicolumn{2}{|c|}{\textbf{Demo \ref{demo:collision}: Collision Avoidance}} \\ \hline
		\textbf{Overview} &  This demo is to show our distributed event processing algorithm that can detect the location, speed, direction of a model car using sensor nodes on the testbed. Model cars that are trying to enter an intersection can use the event information to coordinate to avoid collisions. \\ \hline
		\textbf{Test procedures} &
		\begin{enumerate}
		\item Make sure that the remaining energy of the batteries of each model car is enough for at least 30 minutes running. The battery voltage should be larger than or equal to 1.3V.
		\item Make sure the mote is reliably attached to each model car (there are no distance between the two sockets of the mote and the model car) and the cable between the mote and the model car is not broken.
		\item Turn on the power switch of a model car (switch is in the bottom of the model car).
		\item Put the power-on model car onto the road near the door of QT405 (This road is better for a stable start).
		\end{enumerate} \\ \hline
		\textbf{Solution to possible problems} &
		\begin{enumerate}
		\item When a car runs out of control, the reasons maybe: (1) out of battery; (2) magnetic sensor broken due to bad road; (3) the mote antenna hitting the bridge, which causes mote disconnected to the car. Changing batteries or fixing the sensor and road, or fixing the connection will solve the problem
		\item When two cars get rear hitting, the reason is that the infrared sensor is not working due to lighting from the ceiling. Try to turn off some lamps will solve the problem.
		\item When the battery is newly charged, the car with number 30 may stop some times: Try running it at least 30 minutes before demo after changing batteries.
		\item Two cars running at different directions collide in a T intersection. The reasons may include the follows: (1) One or two cars run out of battery; (2) two packets from the two cars are lost (very rare, low probability event); (3) mote antenna hitting the bridge, which causes mote disconnected to the car. Changing batteries or fixing the connections will solve the problem.
		\end{enumerate}  \\
		\hline
	\end{tabular}
\end{center}

\begin{center}
	\begin{tabular}{ | p{2cm} | p{10cm} | }
		\hline
		\multicolumn{2}{|c|}{\textbf{Demo \ref{demo:tracking}: Object Tracking}} \\ \hline
		\textbf{Overview} &  The current version demo is to show our distributed algorithm of location event detection on the testbed. \\ \hline
		\textbf{Test procedures} &
		\begin{enumerate}
		\item Make sure the server PC is up and is running Serial Forwarder. To start Serial Forwarder, simply open a new Cygwin window and enter command 'sf'.
		\item The program of the base station attached to Server PC should be TOSBase. If no program, run Cygwin, cd /opt/tinyos-1.x/apps/TOSBase, make reinstall.0 mib510, /dev/ttyS0
		\item Double click "demo" icon (the icon image is a "red car") on the demo computer.
		\end{enumerate} \\ \hline
		\textbf{Solution to possible problems} &
		\begin{enumerate}
		\item The Java application can't start correctly. It is probably the server computer doesn't have Serial Forwarder running.
		\item Cars are running on the platform but none is showing on the GUI. The reasons may include the follows: (1) Base station problem: power is not on or not connected to the PC. (2) Car problem: the mote on the car is not correctly connected to the controlling circuit. The method of pinpoint the reason is to check whether the green light on the car's mote is blinking, when a car runs into an intersection. If it is blinking, then the problem is probably on base station. If no green light blinking, then the reason is probably on the car.
		\item Wrong path problem. The class path may be wrong if someone change the link or the target folder. The method of fixing this is to correct the following path: (1) the short cut should link to "\url{C:/tinyos/cygwin/bin/demo.bat}" (2) the target path should be "\url{C:/tinyos/cygwin/opt/tinyos-1.x/contrib/iTranSNet/tools/java/itransnet\_base/tracking/Server/Display}" If these are changed, the path will be wrong and the program cannot be started.
		\end{enumerate}  \\
		\hline
	\end{tabular}
\end{center}

\begin{center}
	\begin{tabular}{ | p{2cm} | p{10cm} | }
		\hline
		\multicolumn{2}{|c|}{\textbf{Demo \ref{demo:trafficLight}: Traffic Light Control}} \\ \hline
		\textbf{Overview} &  The adaptive traffic light control demo is able to schedule the timings and periods of the traffic lights at each intersection adaptively according to dynamically changing traffic environment. \\ \hline
		\textbf{Test procedures} &
		\begin{enumerate}
		\item	Install the Traffic Light program on the Micaz motes that control the traffic lights.
 		\item The ID of the program should be the intersection ID plus 32. (i.e. if the intersection has an ID of 1, then the mote's ID should be 33)
 		\item The motes should be plugged into the circuits that control the traffic lights. Turn on the power for traffic lights.
		\end{enumerate} \\ \hline
		\textbf{Solution to possible problems} &
		\begin{enumerate}
		\item By default, if there is no car, the traffic lights should change every 6 seconds between red and green lights. If not, try unplug the motes and plug them back.
		\item The vehicle does not stop at the intersection. In practice, there should be very small probability of packet loss under the acknowledge system. Check if the mote on the vehicle is correctly connected.
		\end{enumerate}  \\
		\hline
	\end{tabular}
\end{center}

\begin{center}
	\begin{tabular}{ | p{2cm} | p{10cm} | }
		\hline
		\multicolumn{2}{|c|}{\textbf{Demo \ref{demo:shm}: Structural Health Monitoring}} \\ \hline
		\textbf{Overview} &  This demo is to show the effectiveness of using WSN for structural health monitoring.  Four sensor nodes are attached to the test building and collect vibration data to the server. (sampling frequency = 200Hz ).
A event detection algorithm is implemented in the server and keeps detecting if there is a 'car hit' event on the structure. 
In case when a car model hits the building, two shakers are triggered to excite the building. After this hit is detected, a SHM algorithm is immediately carried out to the test if there is any damage caused by the car hit. The damage was 'generated' by removing one column of the structure. \\ \hline
		\textbf{Test procedures} &
		\begin{enumerate}
		\item Turn on the four sensors on the structure.
		\item Attach the gateway using the USB cable connected to the desktop computer
		\item Open Labview on the desktop and click on the 'WSN-for-SHM' application.
		\item Click start on the labview program, you should be able to see the vibration signals from the GUI.
		\end{enumerate} \\ \hline
		\textbf{Solution to possible problems} &
		\begin{enumerate}
		\item Error occurs in the labview. Check the serial port number of the gateway and see if the serial port setup is correct in the labview GUI.
		\end{enumerate}  \\
		\hline
	\end{tabular}
\end{center}

\begin{center}
	\begin{tabular}{ | p{2cm} | p{10cm} | }
		\hline
		\multicolumn{2}{|c|}{\textbf{Demo \ref{demo:psware}: PSWare}} \\ \hline
		\textbf{Overview} &  This demo shows the effectiveness of our pub/sub middleware - PSWare \\ \hline
		\textbf{Test procedures} &
		\begin{enumerate}
		\item Gateway node attached to the server computer is running TOSBase
		\item The node for event detection is turned on
		\item SerialForwarder is running on the gateway computer. If not, open Cygwin and enter command 'sf'.
		\item On the gateway computer, start the PSWare Java program, by entering command 'psware' in Cygwin
		\item Open PSWare web page: \url{http://imcl.comp.polyu.edu.hk/wsn/psware/}
		\item On the web page, click the tab 'iTranSNet', then select all the roads by clicking on them. Click the subscribe button. The green LED on the node for event detection will be turned on.
		\item On the web page, click the tab 'Home'. Since the 'iTranSNet' tab will query the database in a very high frequency, it is better to switch the 'Home' when idle.
		\end{enumerate} \\ \hline
		\textbf{Solution to possible problems} &
		\begin{enumerate}
		\item Cars are running on the platform but there is no red box on the web page. Check if the PSware application is correctly receiving messages. If it receives messages, there'll be texts popping up in the Cygwin window. If no text is shown, check the cars or the gateway. 
		\item Not all the red boxes are shown. On the 'iTranSNet' web tab page, select all the road sections, then click the subscribe button again.
		\item The web page is updating very slowly. On the PSWare web page, open 'Home' tab when idle and switch to 'iTranSNet' tab only during the demo.
		\end{enumerate}  \\
		\hline
	\end{tabular}
\end{center}
